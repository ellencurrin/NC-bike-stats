<!DOCTYPE html>

<html>
<head>
    <title>DataTable</title>

<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script src="http://cdn.datatables.net/1.10.3/js/jquery.dataTables.min.js"></script>
<script src="crashseverity.json"></script>
<link src="http://cdn.datatables.net/1.10.3/css/jquery.dataTables.css"></link>

</head>

<body>
    
<script>

var dataSet = [];
var row = [];
 
$(document).ready(function() {
    loadData();
    $('#demo').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="example"></table>' );
 
    $('#example').dataTable( {
        "data": dataSet,
        "columns": [
            { "title": "City" },
            { "title": "1997" },
            { "title": "1998" },
            { "title": "1999", "class": "center" },
            { "title": "2000", "class": "center" },
            { "title": "2001" },
            { "title": "2002" },
            { "title": "2003" },
            { "title": "2004" },
            { "title": "2005" },
            { "title": "2006" },
            { "title": "2007" },
            { "title": "2008" },
            { "title": "2009" },
            { "title": "2010" },
            { "title": "2011" },
            { "title": "2012" },
            { "title": "Total" },
        ]
    } );   
} );

function loadData(){
    
    $.ajax({
            type:"GET",
            url:"crashcity.json",
            dataType:"text",
            success: parseData
    });
}


function parseData(data){
    //create an object from the JSON file
    dataObj = $.parseJSON(data);
    for (var i=0; i < dataObj.length; i++) {        
        years.push(dataObj[i].Year);
        nonfatal.push(dataObj[i].NonFatal);
        fatal.push(dataObj[i].Fatal);
    }   
    makeChart1();        
}

</script>

<div id="demo"></div>

</body>

</html>
